Category = "Finance"; Secret = 0
Places = 2; StripZeros = 1
Format = "float"; GroupDigits = 0; DegreesMode = 0; ShadowConstants = 0
"Time Value of Money"

"Payment calculation"
pmt = -(pv + fv / (1 + mint)**n) * mint / (1 - (1 + mint)**-n)

"Variables"
pmt$: "monthly payment"
pv$: $100,000 "loan amount"
fv$: 0 "future value (baloon payment)"
yint%: 6.125% "annual interest rate %"
n: 360 "number of payments (30 years)"

"Monthly interest rate from annual"
mint = yint / 12
~~~~~~~~~~~~~~~~~~~~~~~~~~~
"Time Value of Money"

"Payment calculation"
pmt = -(pv + fv / (1 + mint)**n) * mint / (1 - (1 + mint)**-n)

"Variables"
pmt$: "monthly payment"
pv$: $99,999.612 "loan amount"
fv[$0:$0.20]$: $0.13 "future value (balloon payment)"
yint[0:5.1%]%: 5% "annual interest rate %"
n[270:360]: 278.9181 "number of payments (30 years)"

"Monthly interest rate from annual"
yint = mint * 12

rate%: 6+6%
rate%->
~~~~~~~~~~~~~~~~~~~~~~~~~~~
Category = "Finance"; Secret = 0
Places = 6; StripZeros = 1
Format = "float"; GroupDigits = 0; DegreesMode = 0; ShadowConstants = 0
"Solve with 6 decimal places - should fail balance check"

"Payment calculation"
pmt = -(pv + fv / (1 + mint)**n) * mint / (1 - (1 + mint)**-n)

"Variables"
pmt$: -$602.75 "monthly payment"
pv$: $100,000 "loan amount"
fv$: -$20.26 "future value (balloon payment)"
yint%: 6.05% "annual interest rate %"
n: 360 "number of payments (30 years)"

"Monthly interest rate from annual"
yint = mint * 12
~~~~~~~~~~~~~~~~~~~~~~~~~~~
Category = "Finance"; Secret = 0
Places = 2; StripZeros = 1
Format = "float"; GroupDigits = 0; DegreesMode = 0; ShadowConstants = 0
"Same values with default tolerance - should pass"

"Payment calculation"
pmt = -(pv + fv / (1 + mint)**n) * mint / (1 - (1 + mint)**-n)

"Variables"
pmt$: -$602.75 "monthly payment"
pv$: $100,000 "loan amount"
fv$: -$20.26 "future value (balloon payment)"
yint%: 6.05% "annual interest rate %"
n: 360 "number of payments (30 years)"

"Monthly interest rate from annual"
yint = mint * 12
~~~~~~~~~~~~~~~~~~~~~~~~~~~
Category = "Finance"; Secret = 0
Places = 2; StripZeros = 1
Format = "float"; GroupDigits = 0; DegreesMode = 0; ShadowConstants = 0
"TVM with wrong pmt - should fail balance check"

"Payment calculation"
pmt = -(pv + fv / (1 + mint)**n) * mint / (1 - (1 + mint)**-n)

"Variables"
pmt$: -$500 "wrong payment - should be ~$607"
pv$: $100,000 "loan amount"
fv$: $0 "future value"
yint%: 6.125% "annual interest rate %"
n: 360 "number of payments"

"Monthly interest rate from annual"
mint = yint / 12
~~~~~~~~~~~~~~~~~~~~~~~~~~~
Category = "Finance"; Secret = 0
Places = 8; StripZeros = 1
Format = "float"; GroupDigits = 0; DegreesMode = 0; ShadowConstants = 0
"High precision (8 places) - exposes rounding error in $ values"

"Payment calculation"
pmt = -(pv + fv / (1 + mint)**n) * mint / (1 - (1 + mint)**-n)

"Variables"
pmt$: -$602.75 "monthly payment"
pv$: $99,999.86 "loan amount"
fv$: -5000 "future value (baloon payment)"
yint%: 6.125% "annual interest rate %"
n: 360 "number of payments (30 years)"

"Monthly interest rate from annual"
mint = yint / 12
~~~~~~~~~~~~~~~~~~~~~~~~~~~
Category = "Finance"; Secret = 0
Places = 2; StripZeros = 1
Format = "float"; GroupDigits = 1; DegreesMode = 0; ShadowConstants = 0
Status = "Input and output variables cleared"; StatusIsError = 0
"Solve for pv with return and fv"

"TVM calculation"
pmt = -(-pv + fv / (1 + mint)**n) * mint / (1 - (1 + mint)**-n)

"Monthly interest rate from annual"
n = years * 12

"Return net of fees"
return = mint * 12

--Variables--
pv$:
years: 20
pmt$: $19,990.49
return%: 24.19%
fv$: $2,000,112.80

~~~~~~~~~~~~~~~~~~~~~~~~~~~
Category = "Finance"; Secret = 0
Places = 2; StripZeros = 1
Format = "float"; GroupDigits = 0; DegreesMode = 0; ShadowConstants = 0
"Root at grid point (gain=0 when fv=pv)"

fv = pv * (1 + gain)**years

Enter pv$: $100.00
years: 20
gain[-1:1]%:
fv$: $100
~~~~~~~~~~~~~~~~~~~~~~~~~~~
Category = "Finance"; Secret = 0
Places = 2; StripZeros = 1
Format = "float"; GroupDigits = 0; DegreesMode = 0; ShadowConstants = 0
"Root at lower bound (gain=-1 when fv=0)"

fv = pv * (1 + gain)**years

Enter pv$: $100.00
years: 1
gain[-1:1]%:
fv$: $0
~~~~~~~~~~~~~~~~~~~~~~~~~~~
Category = "Finance"; Secret = 0
Places = 2; StripZeros = 1
Format = "float"; GroupDigits = 0; DegreesMode = 0; ShadowConstants = 0
"Root at upper bound (gain=1 when fv=2*pv)"

fv = pv * (1 + gain)**years

Enter pv$: $100.00
years: 1
gain[-1:1]%:
fv$: $200
~~~~~~~~~~~~~~~~~~~~~~~~~~~
Category = "Finance"; Secret = 0
Places = 2; StripZeros = 1
Format = "float"; GroupDigits = 0; DegreesMode = 0; ShadowConstants = 0
"Root at test point without limits (gain=-1, no sign change)"

fv = pv * (1 + gain)**years

Enter pv$: $100.00
years: 20
gain%:
fv$: $0
~~~~~~~~~~~~~~~~~~~~~~~~~~~
Category = "Finance"; Secret = 0
Places = 2; StripZeros = 1
Format = "float"; GroupDigits = 0; DegreesMode = 0; ShadowConstants = 0
"Root at x=0 without limits, no sign change (y=x^2)"

y = x**2

y: 0
x:
~~~~~~~~~~~~~~~~~~~~~~~~~~~
Category = "Finance"; Secret = 0
Places = 2; StripZeros = 1
Format = "float"; GroupDigits = 1; DegreesMode = 0; ShadowConstants = 0
"Solve for years - TVM with singularity at n=0"

"TVM calculation"
pmt = -(-pv + fv / (1 + mint)**n) * mint / (1 - (1 + mint)**-n)

"Monthly interest rate from annual"
n = years * 12

"Return net of fees"
return - fees = mint * 12

--Variables--
pv$: $4,204,527.03
years:
pmt$: $20,000
return%: 2%
fees%: 0.65%
fv$: 0

~~~~~~~~~~~~~~~~~~~~~~~~~~~
